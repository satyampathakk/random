<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - RandomChatt.com</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%236366f1'/%3E%3Cpath d='M30 35h40c3 0 5 2 5 5v20c0 3-2 5-5 5H55l-10 10v-10H30c-3 0-5-2-5-5V40c0-3 2-5 5-5z' fill='white'/%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/admin.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6515814749102553" crossorigin="anonymous"></script>
</head>
<body>
    <div class="admin-app">
        <!-- Login Section -->
        <div id="login-section" class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <span class="login-icon">üîê</span>
                    <h1>Admin Panel</h1>
                    <p>Enter your API key to access the dashboard</p>
                </div>
                <form id="login-form" class="login-form">
                    <div class="input-group">
                        <label for="api-key-input">API Key</label>
                        <input 
                            type="password" 
                            id="api-key-input" 
                            placeholder="Enter your admin API key..." 
                            autocomplete="off"
                            required
                        >
                    </div>
                    <div id="login-error" class="error-message hidden">
                        <span class="error-icon">‚ö†Ô∏è</span>
                        <span class="error-text">Invalid API key. Please try again.</span>
                    </div>
                    <button type="submit" id="login-btn" class="login-btn">
                        <span>Access Dashboard</span>
                        <span class="arrow">‚Üí</span>
                    </button>
                </form>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="dashboard-container hidden">
            <header class="dashboard-header">
                <div class="header-left">
                    <span class="header-icon">üîê</span>
                    <h1>Admin Panel</h1>
                </div>
                <button id="logout-btn" class="logout-btn">
                    <span>Logout</span>
                    <span class="logout-icon">üö™</span>
                </button>
            </header>

            <main class="dashboard-main">
                <!-- Loading Overlay -->
                <div id="loading-overlay" class="loading-overlay">
                    <div class="spinner"></div>
                    <p>Loading dashboard...</p>
                </div>

                <!-- Error Banner -->
                <div id="error-banner" class="error-banner hidden">
                    <span class="error-icon">‚ö†Ô∏è</span>
                    <span id="error-banner-text">Connection error. Retrying...</span>
                </div>

                <!-- Online Users Stats -->
                <section class="stats-section">
                    <h2 class="section-title">üë• Online Users</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-total-online">0</span>
                                <span class="stat-label">Total Online</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìù</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-text-mode">0</span>
                                <span class="stat-label">Text Mode</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìπ</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-video-mode">0</span>
                                <span class="stat-label">Video Mode</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Chat Status Stats -->
                <section class="stats-section">
                    <h2 class="section-title">üí¨ Chat Status</h2>
                    <div class="stats-grid">
                        <div class="stat-card status-waiting">
                            <div class="stat-icon">‚è≥</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-waiting">0</span>
                                <span class="stat-label">Waiting</span>
                            </div>
                        </div>
                        <div class="stat-card status-chatting">
                            <div class="stat-icon">üí¨</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-real-chat">0</span>
                                <span class="stat-label">Real Chat</span>
                            </div>
                        </div>
                        <div class="stat-card status-bot">
                            <div class="stat-icon">ü§ñ</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-bot-chat">0</span>
                                <span class="stat-label">Bot Chat</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Queue Status -->
                <section class="stats-section">
                    <h2 class="section-title">üìä Queue Status</h2>
                    <div class="stats-grid stats-grid-2">
                        <div class="stat-card">
                            <div class="stat-icon">üìù</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-text-queue">0</span>
                                <span class="stat-label">Text Queue</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìπ</div>
                            <div class="stat-content">
                                <span class="stat-value" id="stat-video-queue">0</span>
                                <span class="stat-label">Video Queue</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Lifetime Stats -->
                <section class="stats-section">
                    <h2 class="section-title">üìä Lifetime Stats</h2>
                    <div class="lifetime-stats-card">
                        <div class="lifetime-stat">
                            <span class="lifetime-icon">üëÅÔ∏è</span>
                            <span class="lifetime-label">Visitors</span>
                            <span class="lifetime-value" id="stat-visitors">0</span>
                        </div>
                        <div class="lifetime-divider"></div>
                        <div class="lifetime-stat">
                            <span class="lifetime-icon">üìπ</span>
                            <span class="lifetime-label">Video Visitors</span>
                            <span class="lifetime-value" id="stat-video-visitors">0</span>
                        </div>
                        <div class="lifetime-divider"></div>
                        <div class="lifetime-stat">
                            <span class="lifetime-icon">üîó</span>
                            <span class="lifetime-label">Connections</span>
                            <span class="lifetime-value" id="stat-connections">0</span>
                        </div>
                        <div class="lifetime-divider"></div>
                        <div class="lifetime-stat">
                            <span class="lifetime-icon">üí¨</span>
                            <span class="lifetime-label">Messages</span>
                            <span class="lifetime-value" id="stat-messages">0</span>
                        </div>
                        <div class="lifetime-divider"></div>
                        <div class="lifetime-stat">
                            <span class="lifetime-icon">‚è±Ô∏è</span>
                            <span class="lifetime-label">Uptime</span>
                            <span class="lifetime-value" id="stat-uptime">0s</span>
                        </div>
                    </div>
                </section>

                <!-- Active Users Table -->
                <section class="stats-section">
                    <h2 class="section-title">üìã Active Users</h2>
                    <div class="users-table-container">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>Nickname</th>
                                    <th>Mode</th>
                                    <th>Partner Status</th>
                                    <th>Bot Chat</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <tr class="empty-row">
                                    <td colspan="4">No active users</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Footer with refresh info -->
                <footer class="dashboard-footer">
                    <div class="refresh-info">
                        <span class="refresh-indicator" id="refresh-indicator"></span>
                        <span>Last updated: <span id="last-updated">--:--:--</span></span>
                    </div>
                    <div class="auto-refresh-status">
                        Auto-refresh: <span id="auto-refresh-status">ON</span>
                    </div>
                </footer>
            </main>
        </div>
    </div>
    <script src="/static/js/admin.js" defer></script>
</body>
</html>
